<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>æŠ½çæ´»å‹•</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 50px; }
    #result { margin-top: 30px; font-size: 24px; }
    button { font-size: 20px; padding: 10px 30px; }
  </style>
</head>
<body>
  <h1>ğŸ‰ æŠ½çæ´»å‹• ğŸ</h1>
  <button onclick="drawPrize()" id="drawBtn">é»æˆ‘æŠ½ç</button>
  <div id="result"></div>

  <script>
    const MAX_WAIT_TIME = 5 * 24 * 60 * 60 * 1000; // 5 å¤©
    const FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLSe_PF-8kiwrslHOTL0tYH-Vphe4b4KMGFsUiYPmTY2S1h1flA/formResponse"; // âœ… æ”¹æˆä½ è‡ªå·±çš„
    const PRIZE_ENTRY_ID = "entry.501685564"; // âœ… æ”¹æˆä½ è¡¨å–®ä¸­ã€Œçé …ã€æ¬„ä½çš„ entry ID

    function drawPrize() {
      const lastDrawTime = localStorage.getItem("lastDrawTime");
      const currentTime = new Date().getTime();

      if (lastDrawTime && currentTime - lastDrawTime < MAX_WAIT_TIME) {
        const remainingDays = Math.ceil((MAX_WAIT_TIME - (currentTime - lastDrawTime)) / (1000 * 60 * 60 * 24));
        document.getElementById("result").innerHTML = `æ‚¨å·²åƒåŠ éæŠ½çï¼`;
        return;
      }

      const random = Math.random();
      console.log("æŠ½çäº‚æ•¸å€¼ï¼š", random); // ç”¨ä¾†è§€å¯Ÿ

      let prize = "è¬è¬åƒèˆ‡";
      if (random < 0.01) {
        prize = "ä¸€ç­‰ç";
      } else if (random < 0.04) {
        prize = "äºŒç­‰ç";
      } else if (random < 0.09) {
        prize = "ä¸‰ç­‰ç";
      }

      let message = "";
      if (prize === "è¬è¬åƒèˆ‡") {
        message = "å¾ˆå¯æƒœï¼Œæ‚¨æœªä¸­çï¼";
      } else {
        message = `ğŸŠ æ­å–œæ‚¨æŠ½ä¸­ <strong>${prize}</strong>ï¼è«‹æˆªåœ–ä¸¦ç•™è¨€é ˜çï¼`;
      }

      document.getElementById("result").innerHTML = message;
      document.getElementById("drawBtn").disabled = true;
      localStorage.setItem("lastDrawTime", currentTime);

      // å‚³é€è¡¨å–®è³‡æ–™
      const formData = new FormData();
      formData.append(PRIZE_ENTRY_ID, prize);

      fetch(FORM_URL, {
        method: "POST",
        mode: "no-cors",
        body: formData
      });
    }
  </script>
</body>
</html>